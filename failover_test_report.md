# –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –≤—ã—Å–æ–∫–æ–¥–æ—Å—Ç—É–ø–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ Yandex Cloud, —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Å –ø–æ–º–æ—â—å—é Terraform.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- **–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** 02.08.2025
- **–ü—É–±–ª–∏—á–Ω—ã–π IP –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞:** 84.201.170.171
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –í–ú:**
  - ha-web-web-1 (ID: fhm2pg84g904lmdeolhu, IP: 10.128.0.19)
  - ha-web-web-2 (ID: fhm89le5i3h5eegd6f9t, IP: 10.128.0.16)

## –°—Ü–µ–Ω–∞—Ä–∏–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å–ø–µ—à–Ω–æ
- **–î–µ—Ç–∞–ª–∏:** 
  - –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –æ—Ç–≤–µ—á–∞–µ—Ç HTTP 200
  - –û–±–µ –í–ú –≤ —Å—Ç–∞—Ç—É—Å–µ RUNNING

### 2. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–¥–Ω–æ–π –í–ú
- ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å–ø–µ—à–Ω–æ
- **–î–µ—Ç–∞–ª–∏:**
  - –í–ú ha-web-web-1 –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–æ–π `yc compute instance stop`
  - –í—Ä–µ–º—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏: 23 —Å–µ–∫—É–Ω–¥—ã
  - –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ STOPPED

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ
- ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å–ø–µ—à–Ω–æ
- **–î–µ—Ç–∞–ª–∏:**
  - –í—ã–ø–æ–ª–Ω–µ–Ω–æ 10 HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫—É
  - –í—Å–µ 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–µ—Ä–Ω—É–ª–∏ HTTP 200
  - **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å:** 100% (10/10 –∑–∞–ø—Ä–æ—Å–æ–≤)
  - –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –æ—Å—Ç–∞–≤—à—É—é—Å—è –í–ú

### 4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –í–ú
- ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å–ø–µ—à–Ω–æ
- **–î–µ—Ç–∞–ª–∏:**
  - –í–ú ha-web-web-1 –∑–∞–ø—É—â–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–æ–π `yc compute instance start`
  - –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞: 31 —Å–µ–∫—É–Ω–¥–∞
  - –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ RUNNING

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å–ø–µ—à–Ω–æ
- **–î–µ—Ç–∞–ª–∏:**
  - –ü–æ—Å–ª–µ 60-—Å–µ–∫—É–Ω–¥–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –æ—Ç–≤–µ—á–∞–µ—Ç HTTP 200
  - –û–±–µ –í–ú –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Å—Ç–∞—Ç—É—Å–µ RUNNING
  - –¢–∞—Ä–≥–µ—Ç-–≥—Ä—É–ø–ø–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±–∞ IP –∞–¥—Ä–µ—Å–∞ (10.128.0.16, 10.128.0.19)

## –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 3.4
> –ö–û–ì–î–ê –æ–¥–Ω–∞ –∏–∑ –í–ú –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¢–û–ì–î–ê –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –î–û–õ–ñ–ï–ù –∏—Å–∫–ª—é—á–∏—Ç—å –µ–µ –∏–∑ —Ä–æ—Ç–∞—Ü–∏–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–¥–æ–ª–∂–∞–ª –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ–¥–Ω–æ–π –í–ú
- –¢—Ä–∞—Ñ–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–ª—Å—è –Ω–∞ —Ä–∞–±–æ—Ç–∞—é—â—É—é –í–ú

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 5.2
> –ö–û–ì–î–ê –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é –æ–¥–Ω—É –∏–∑ –í–ú –¢–û–ì–î–ê –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –î–û–õ–ñ–ï–ù –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –æ—Ç–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—è —Å–µ—Ä–≤–∏—Å

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**
- –°–µ—Ä–≤–∏—Å –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–ª—Å—è –≤–æ –≤—Ä–µ–º—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –í–ú
- –ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –í–ú –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω—É–ª–∞—Å—å –≤ —Ä–æ—Ç–∞—Ü–∏—é

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Health-check –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- Health-check –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –í–ú
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–µ–π –í–ú –∏–∑ —Ä–æ—Ç–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –í–ú –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ä–æ—Ç–∞—Ü–∏—é

### –í—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –í–ú:** 23 —Å–µ–∫—É–Ω–¥—ã
- **–ó–∞–ø—É—Å–∫ –í–ú:** 31 —Å–µ–∫—É–Ω–¥–∞
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞:** ~60 —Å–µ–∫—É–Ω–¥ (–≤–∫–ª—é—á–∞—è –≤—Ä–µ–º—è –Ω–∞ health-check)

### –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∞—Ä–≥–µ—Ç-–≥—Ä—É–ø–ø—ã
–§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∞—Ä–≥–µ—Ç-–≥—Ä—É–ø–ø—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–∫–ª—é—á–µ–Ω—ã:
```
targets:
  - subnet_id: e9b99cri6te23ulh7vga
    address: 10.128.0.16
  - subnet_id: e9b99cri6te23ulh7vga
    address: 10.128.0.19
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**üéâ –¢–ï–°–¢ –û–¢–ö–ê–ó–û–£–°–¢–û–ô–ß–ò–í–û–°–¢–ò –ü–†–û–ô–î–ï–ù –£–°–ü–ï–®–ù–û**

–°–∏—Å—Ç–µ–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏:

1. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –í–ú –∏–∑ —Ä–æ—Ç–∞—Ü–∏–∏
2. ‚úÖ –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ –æ–¥–Ω–æ–π –í–ú
3. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –í–ú –≤ —Å—Ç—Ä–æ–π
4. ‚úÖ 100% –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞ –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

## –§–∞–π–ª—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- `test_failover.sh` - —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏
- `failover_test_report.md` - –¥–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è